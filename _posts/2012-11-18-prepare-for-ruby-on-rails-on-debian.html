---
layout: post
title: "Prepare for Ruby on Rails on Debian wheezy"
date: 2012-11-18T18:18:00+01:00
---

<div class='post'>
I start to learn Ruby on Rails. As always when you learn new programming language toolchain is required. In this tutorial I will try to go through toolchain preparation for my Debian wheezy. Of course I based on Vim as my editor of choice. Second requirement will be using some parts of toolchain in latest&nbsp;greatest&nbsp;version.<br />
<br />
As a beginner point for learning Ruby on Rails I choose <a href="http://ruby.railstutorial.org/ruby-on-rails-tutorial-book">this tutorial</a>. I will try to use their methods of setting&nbsp;environment adding my comments where it is needed. Also will resolve Debian and Vim specific issues. So let's begin.<br />
<br />
After quick look at RoR tutorial I have to switch to <a href="http://blog.sudobits.com/2012/05/02/how-to-install-ruby-on-rails-in-ubuntu-12-04-lts/">this site</a> for installation for Ubuntu 12.04 LTS. But instructions don't work as expected for my Debian. So after quick:
<br />
<pre class="brush:bash;gutter:false">sudo apt-get install git curl
</pre>
I realized that I need proxy for curl and not only temporary but permanent. I added below line to my $HOME/.curlrc:
<br />
<pre class="brush:plain;gutter:false">proxy=proxy.server.com:8080
</pre>
After that I was able to download and install stable version of rvm:
<br />
<pre class="brush:bash;gutter:false">curl -L get.rvm.io | bash -s stable</pre>
Next I sourced configuration:
<br />
<pre class="brush:bash;gutter:false">source ~/.rvm/scripts/rvm</pre>
Output which I get was:
<br />
<pre class="brush:plain;gutter:false">pietrushnic@lothlann:~/src/node$ rvm requirements
Requirements for Linux "Debian GNU/Linux wheezy/sid"

NOTE: 'ruby' represents Matz's Ruby Interpreter (MRI) (1.8.X, 1.9.X)
             This is the *original* / standard Ruby Language Interpreter
      'ree'  represents Ruby Enterprise Edition
      'rbx'  represents Rubinius

bash &gt;= 4.1 required
curl is required
git is required (&gt;= 1.7 for ruby-head)
patch is required (for 1.8 rubies and some ruby-head's).

To install rbx and/or Ruby 1.9 head (MRI) (eg. 1.9.2-head),
then you must install and use rvm 1.8.7 first.

Additional Dependencies:
# For Ruby / Ruby HEAD (MRI, Rubinius, &amp; REE), install the following:
  ruby: /usr/bin/apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion pkg-config

# For JRuby, install the following:
  jruby: /usr/bin/apt-get install curl g++ openjdk-6-jre-headless
  jruby-head: /usr/bin/apt-get install ant openjdk-6-jdk

# For IronRuby, install the following:
  ironruby: /usr/bin/apt-get install curl mono-2.0-devel</pre>
I need Ruby so copy&amp;paste line for it and:
<br />
<pre class="brush:bash;gutter:false">sudo apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion pkg-config</pre>
Next thing we need is Node.js because this code of JavaScript runtime is under active development (latest version is 0.8.14 and Debian provided for sid 0.6.19) we use its latest greatest version from git repository.
<br />
<pre class="brush:bash;gutter:false">git clone https://github.com/joyent/node.git</pre>
Following by:
<br />
<pre class="brush:bash;gutter:false">cd node;./configure;make;make test
</pre>
In my configuration only one test failed test-tls-server-verify:
<br />
<pre class="brush:plain;gutter:false">Running 'Allow both authed and unauthed connections with CA1'

assert.js:102
  throw new assert.AssertionError({
        ^
AssertionError: agent1 rejected, but should NOT have been
    at ChildProcess.<anonymous> (/home/pietrushnic/src/node/test/simple/test-tls-server-verify.js:217:14)
    at ChildProcess.EventEmitter.emit (events.js:96:17)
    at Process.ChildProcess._handle.onexit (child_process.js:698:12)
    at process._makeCallback (node.js:248:20)
</anonymous></pre>
This is known issue probably we have to wait for update of OpenSSL library in wheezy.
Ignore this problem and install node.js:
<br />
<pre class="brush:bash;gutter:false">sudo make install</pre>
Because of RoR tutorial requirements we install version 1.9.3:
<br />
<pre class="brush:bash;gutter:false">rvm get head &amp;&amp; rvm reload
rvm install 1.9.3
</pre>
Next thing will be adding vim-ruby for our favorite editor Vim. I organize my dotfiles using git. I also use pathogen to control Vim plugins (as described <a href="http://pietrushnic.blogspot.com/2012/02/improve-productivity-by-tracking-work_20.html">here</a>), so :
<br />
<pre class="brush:bash;gutter:false">cd workspace
git submodule add https://github.com/tpope/vim-rails.git dotfiles/vim/bundle/vim-rails
git submodule init &amp;&amp; git submodule update
git commit -m "vim-rails submodule added"
</pre>
Finally we have ready to use Ruby on Rails development environment based on  Vim.
I suggest to take a look at this <a href="https://www.youtube.com/watch?v=30P8DSNOZuU">movie</a>&nbsp;and after that dive into&nbsp;<a href="http://ruby.railstutorial.org/">tutorial</a>.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Piotr Kr√≥l</div>
<div class='content'>
I really like first one - very useful source of knowledge. To the second one I have to take a closer look to it. Thanks.</div>
</div>
<div class='comment'>
<div class='author'>usecide</div>
<div class='content'>
For morning coffee: http://railscasts.com/.<br />Also check out gems database: https://www.ruby-toolbox.com/<br /></div>
</div>
</div>
