---
layout: post
title: "arbtt as productivity improver for Linux enviroment"
date: 2012-02-06T00:37:00+01:00
categories:
 - productivity
---

<div class='post'>
<span style="font-family: 'Courier New', Courier, monospace;">As I mentioned in previous <a href="http://pietrushnic.blogspot.com/2012/02/first-steps-to-improve-work.html">post</a> I work a lot on improving my productivity. After FreeMind it is time for <a href="http://darcs.nomeata.de/arbtt/doc/users_guide/">arbtt</a>. This is small tool which tracks active windows during your work. It is delivered with distro that I'm currently using (Debian wheezy). So all I had to do was:</span>
<br />
<pre class="brush:bash;gutter:false">sudo apt-get install arbtt</pre>
<span style="font-family: 'Courier New', Courier, monospace;">Below I try describe how I configure arbtt to work with some apps that I use (Google Chrome, FreeMind, gnome-terminal and screen).</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">To effectively work with arbtt I had to run a daemon that collects information. In this way, I found the first problem, namely, it is hard to find a website, which correctly explains how to execute command during startup on Debian with GNOME environment. After few tries I realize that I should focus on GNOME autostart mechanism. This led me to create little file in $HOME/.config/autostart which looks like that:</span>
<br />
<pre class="brush:plain;gutter:false">[Desktop Entry]
Type=Application
Encoding=UTF-8
Name=The Automatic Rule-Base Time Tracker
Exec=arbtt-capture
Terminal=false
</pre>
<span style="font-family: 'Courier New', Courier, monospace;">So I had configured arbtt and it starts to capture data about my work. To display this data in friendly manner arbtt-stat should be used. Application complains if&nbsp;$HOME/.arbtt/</span><span style="font-family: 'Courier New', Courier, monospace;">categorize.cfg wasn't</span><span style="font-family: 'Courier New', Courier, monospace;"> configured for it appropriate. Detailed documentation about this file can be found on arbtt <a href="http://darcs.nomeata.de/arbtt/doc/users_guide/configuration.html">configuration page</a>. </span><span style="font-family: 'Courier New', Courier, monospace;">The process of writing this file should be iterative, starting point for me was:</span>
<br />
<pre class="brush:plain;gutter:false">-- This defines some aliases, to make the reports look nicer:
aliases (
        "sun-awt-X11-XFramePeer"        -&gt; "java"
        )

-- A rule that probably everybody wants. Being inactive for over a minute
-- causes this sample to be ignored by default.
$idle &gt; 60 ==&gt; tag inactive,


current window $program == "sun-awt-X11-XFramePeer" &amp;&amp;
current window ($title =~ /(.+)\s-\sFreeMind/)
  ==&gt; tag program:FreeMind-$1,

current window $program == "gnome-terminal" &amp;&amp;
current window ($title =~ /(.+)/)
   ==&gt; tag term:$1,

-- Simple rule that just tags the current program
tag program:$current.program,

-- I'd like to know what web pages in google-chrome I'm working in. So I do
-- not tag necessarily by the active window title, but the title that contains
-- the specific string.
current window $program == "google-chrome" &amp;&amp;
any window ($program == "google-chrome" &amp;&amp; $title =~ /(.+)\s-\sGoogle\sChrome/)
  ==&gt; tag www:$1,
</pre>
However, after creating a configuration file such statistics were displayed correctly it was still a big problem to solve - how to combine arbtt with gnome-terminal and screen. The first one requires only a correctly set the window's name. Although the synchronization of the terminal window's name with a window inside the screen was not a trivial task (primarily on the mass of broken tutorials that can be found on the web). Finally my .screenrc looks like that:
<br />
<pre class="brush:plain;gutter:false">termcapinfo xterm* 'hs:ts=\E]0;:fs=\007:ds=\E]0;\007'
defhstatus "[screen] ^Et"
hardstatus off
# Set the scrollback length:
defscrollback 10000
    
# Select whether you want to see the copyright notice during startup:
startup_message off
# Display a caption string below, appearing like tabs and
# displaying the window number and application name (by default).
caption always
caption string "%{= kG}[ %{G}%H %{g}][%= %{= kw}%?%-Lw%?%{r}(%{W}%n*%f%t%?(%u)%?%{r})%{w}%?%+Lw%?%?%= %{g}][%{B} %m-%d %{W}%c %{g}]"
#"%{= kb}[ %=%{w}%?%-Lw%?%{b}(%{W}%n*%f %t%?(%u)%?%{b})%{w}%?%+Lw%?%?%= %{b}][%{B} %H %{W}%l %{b}][%{B} %d.%m.%Y %{W}%0c %{b}]"
#"%{bw}[%H] [%?%-Lw%?%{wb}%n*%f%t%{bw}%?%+Lw%?]%=%{bw} [%1`] [%c:%s] [%l]"
# "%{kw}%-w%{wr}%n %t%{-}%+w"
</pre>
<span style="font-family: 'Courier New', Courier, monospace;">defhstatus set terminal title and caption keeps data about my open windows in screen. Every time I open new window or change current one terminal title is updated.</span><br />

<span style="font-family: 'Courier New', Courier, monospace;">For now that's all. In the future I wanted to write how to synchronize the title of the window in the screen with vim editor to include information about the currently edited file.</span></div>
